"use strict";$(document).ready(()=>{if(checkLocation("news/article")){(new CategorySelection).index()}});const checkLocation=t=>{let e=new RegExp(t);return 0!=e.lastIndex&&(e.lastIndex=0),e.test(window.location.pathname)};class CategorySelection{constructor(){this.find={box:"js-category-selection-box",select:"js-select-category",view:"js-selected-categories"},this.$box=null,this.$select=null,this.$view=null,this.$input=null,this.$item=$("<div/>",{class:"js-selected-category"}),this.$cross=$("<span/>",{text:"Ã—",class:"js-selected-category__del"}),this.data={}}index(){this.$box=$("."+this.find.box),this.$box.length&&(this.$select=this.$box.find("."+this.find.select),this.$view=this.$box.find("."+this.find.view),this.$input=this.$box.find("input[name=categories]"),this._initCategories())}_initCategories(){let t=this.$input.val();if(t){this.data.values=t.split(",");for(let t of this.data.values)this._addIdToView(t),this._updateInput()}else this.data.values=[];this.$select.on("change",()=>{this._setCategory()})}_setCategory(){let t=this.$select.val();this._addIdToView(t),this._addIdToInput(t)}_hideCategory(t){let e=this.$select.find("option[value="+t+"]");return e.attr("hidden",""),this.$select.val(0),e.text()}_unhideCategory(t){this.$select.find("option[value="+t+"]").removeAttr("hidden"),this.$select.val(0)}_addIdToView(t){let e=this._hideCategory(t),i=this.$item.clone(),s=this.$cross.clone();i.text(e).append(s).appendTo(this.$view).attr("data-id",t),s.on("click",t=>{this._unsetCategory(t)})}_addIdToInput(t){this.data.values.push(t),this._updateInput()}_unsetId(t){let e=this.data.values.indexOf(t);e>-1&&this.data.values.splice(e,1),this._updateInput()}_unsetCategory(t){let e=$(t.target).parent(),i=e.attr("data-id");e.remove(),this._unhideCategory(i),this._unsetId(i)}_updateInput(){this.$input.val(this.data.values.join(","))}}